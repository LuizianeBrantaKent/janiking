
:root{
  /* brand + layout fallbacks (works even if your header/sidebar vars exist) */
  --brand-blue:#004990;
  --brand-blue-600:#0b57d0;          /* slightly brighter for hover/focus */
  --card-bg:#ffffff;
  --card-border:#e5e7eb;             /* #ddd-ish */
  --muted:#6b7280;                   /* gray-500 */
  --page-bg:#f1f5f9;                 /* slate-100 */
  --ring:#c7d2fe;
  --header-h: var(--header-h, 80px);
  --nav-w:    var(--nav-w, 240px);
}

/* page scaffold (keeps content from sliding under header/sidebar) */
.page-scroll-shell{
  background:var(--page-bg);
  min-height:100vh;
  padding-top:clamp(12px, 1.2vw, 16px);
  padding-bottom:24px;
}

#fr-msg.container{
  margin-left: min(max(var(--nav-w), 200px), 280px); /* respect fixed sidebar */
  padding-top: calc(var(--header-h) - 60px);          /* respect fixed header */
  max-width: 1280px;
}

/* title */
.page-title{
  font-size:28px;
  font-weight:700;
  color:#1f2937;
  margin: 8px 0 14px;
}

/* tabs (Announcements / Direct Messages) */
.fr-tabs{
  display:flex; gap:10px; margin: 8px 0 18px;
}
.fr-tab{
  display:inline-flex; align-items:center; gap:8px;
  padding:10px 14px;
  border:1px solid var(--card-border);
  background:#fff;
  color:#374151;
  border-radius:10px;
  text-decoration:none;
  transition:all .15s ease;
  font-weight:600;
}
.fr-tab:hover{ border-color:#cbd5e1; box-shadow:0 1px 0 rgba(0,0,0,.03); }
.fr-tab.active{
  background:rgba(0,73,144,.08);
  color:var(--brand-blue);
  border-color: rgba(0,73,144,.25);
}

/* two-column layout */
.fr-layout{
  display:grid;
  grid-template-columns: 1.05fr 1.95fr;  /* list | reader */
  gap:16px;
}

/* card header strip */
.fr-card-head{
  background: linear-gradient(0deg, #fff, #fff);
  border-bottom:1px solid var(--card-border);
  padding:14px 16px;
  border-radius:14px 14px 0 0;
}
.fr-card-head h1{
  font-size:18px;
  line-height:1.2;
  color:var(--brand-blue);
  font-weight:800;
  margin:0;
}

/* left list */
.fr-list{
  background:var(--card-bg);
  border:1px solid var(--card-border);
  border-radius:14px;
  box-shadow:0 6px 16px rgba(2,6,23,.06);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  min-height:480px;
}
.fr-list .fr-card-head{ border:0; border-bottom:1px solid var(--card-border); }

.fr-item{
  display:block;
  padding:12px 14px;
  border-bottom:1px solid #edf0f4;
  text-decoration:none;
  color:#111827;
  background:#fff;
  transition:background .15s ease, border-color .15s ease;
}
.fr-item:last-child{ border-bottom:0; }
.fr-item:hover{ background:#f8fafc; }
.fr-item.active{
  background:rgba(0,73,144,.06);
  border-left:3px solid var(--brand-blue);
}

.fr-subj{
  font-weight:700;
  margin-bottom:4px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.fr-meta{
  color:var(--muted);
  font-size:12.5px;
}

.fr-prev{
  margin-top:6px;
  font-size:13px;
  color:#374151;
  display:-webkit-box;
  -webkit-line-clamp:2; /* non-standard but works in webkit/blink */
  -webkit-box-orient:vertical;
  overflow:hidden;
}

/* right reader */
.fr-view{
  background:var(--card-bg);
  border:1px solid var(--card-border);
  border-radius:14px;
  box-shadow:0 6px 16px rgba(2,6,23,.06);
  padding-bottom:10px;
  min-height:480px;
}
.fr-view .fr-card-head{ margin-bottom:8px; }

.fr-view h2{
  font-size:20px; margin:12px 16px 6px; font-weight:800; color:#111827;
}
.fr-view .fr-meta{ margin:0 16px 8px; }
.fr-body{ margin:0 16px 16px; line-height:1.55; color:#1f2937; }
.fr-note{
  margin:18px 16px; color:var(--muted);
  padding:14px; border:1px dashed #d1d5db; border-radius:12px; background:#fafafa;
}

/* composer (reply/send) */
.fr-composer{
  margin-top:16px;
  background:#fff;
  border:1px solid var(--card-border);
  border-radius:14px;
  box-shadow:0 6px 16px rgba(2,6,23,.06);
  padding-bottom:12px;
}

.fr-composer .rowline{
  display:flex; flex-direction:column;
  gap:8px; padding:12px 16px;
}
.fr-composer .rowline:not(:last-child){ border-bottom:1px solid #f1f5f9; }
.fr-composer .lbl{ font-size:13px; color:#374151; font-weight:600; }

.fr-composer input[type="text"],
.fr-composer select,
.fr-composer textarea{
  width:100%;
  padding:10px 12px;
  border:1px solid #d1d5db;
  border-radius:10px;
  background:#fff;
  font:inherit;
  color:#111827;
  outline:none;
  transition:border .12s ease, box-shadow .12s ease;
}
.fr-composer textarea{ min-height:120px; resize:vertical; }
.fr-composer input:focus,
.fr-composer select:focus,
.fr-composer textarea:focus{
  border-color:var(--brand-blue);
  box-shadow:0 0 0 3px var(--ring);
}

/* actions */
.fr-composer .actions{ border:0; padding-top:4px; }
.fr-composer button{
  appearance:none; border:0; cursor:pointer;
  background:var(--brand-blue); color:#fff;
  padding:10px 16px; border-radius:10px; font-weight:700;
  box-shadow:0 1px 0 rgba(0,0,0,.05);
  transition:background .12s ease, transform .02s ease;
}
.fr-composer button:hover{ background:var(--brand-blue-600); }
.fr-composer button:active{ transform:translateY(1px); }

/* responsive */
@media (max-width: 1180px){
  #fr-msg.container{ margin-left: clamp(0px, 1.5vw, 24px); }
  .fr-layout{ grid-template-columns: 1fr; }
  .fr-view{ order:2; }
  .fr-list{ order:1; }
}
@media (max-width: 640px){
  .page-title{ font-size:24px; }
  .fr-tab{ padding:8px 12px; }
  .fr-composer textarea{ min-height:100px; }
}

/* === Center the messaging page and add breathing room === */
#fr-msg.container{
  /* wider but centered */
  max-width: 1180px;          /* tweak 1100–1280 if you like */
  margin-left: calc(var(--nav-w) + 36px);  /* was tighter; add more gap from sidebar */
  margin-right: auto;
  /* clearer space under the fixed header */
  padding-top: calc(var(--header-h) + 10px);
  padding-left: 4px;          /* subtle inner gutter so cards don’t kiss the edge */
  padding-right: 4px;
}

/* keep the two-column layout nicely centered inside the container */
.fr-layout{
  margin-inline: auto;        /* centers the grid inside the container */
  gap: 18px;                   /* a touch more breathing room between columns */
}

/* compact the page edge so cards visually sit in the middle on large screens */
@media (min-width: 1400px){
  #fr-msg.container{ max-width: 1240px; }
}

/* smaller screens still stack nicely with a comfortable offset */
@media (max-width: 1180px){
  #fr-msg.container{
    margin-left: clamp(16px, 3vw, 28px);   /* don’t stick to the sidebar on tablet */
    padding-top: calc(var(--header-h) + 12px);
  }
}

/* === Messaging Page Layout Fixes === */
#fr-msg.container{
  /* keep the content centered */
  max-width: 1180px;
  margin-left: calc(var(--nav-w) + 24px); /* more gap from sidebar */
  margin-right: 24px;
  padding-top: calc(var(--header-h) + 8px); /* reduce distance from header */
  padding-bottom: 20px;
  min-height: calc(100vh - var(--header-h)); /* fill viewport */
  box-sizing: border-box;
}

/* grid gap adjustment for better balance */
.fr-layout{
  margin-inline: auto;
  gap: 20px;
}

/* smaller screens */
@media (max-width: 1180px){
  #fr-msg.container{
    margin-left: calc(var(--nav-w) + 12px);
    margin-right: 12px;
    padding-top: calc(var(--header-h) + 4px);
  }
}

/* === Put the scrollbar on the far right (body), not the container === */
html, body { height: 100%; }
body { overflow-y: auto; }                      /* scrollbar at page edge */

#fr-msg.container{
  overflow: visible !important;                 /* stop inner scroll */
  min-height: auto;                             /* let body grow */
  height: auto;
}

/* if any wrapper clipped scrolling, open it up */
.page-scroll-shell, main, .app-main { overflow: visible !important; }

/* Page-wide scroller so the bar sits at the far right */
html, body { height: 100%; overflow: visible; }

.page-scroll-shell{
  /* was: min-height:100vh with no overflow */
  min-height: 0;                          /* undo earlier rule */
  height: calc(100vh - var(--header-h));  /* space below fixed header */
  overflow-y: auto;                        /* <-- scrollbar lives here */
  -webkit-overflow-scrolling: touch;
  padding-top: 12px;                       /* light top padding */
  padding-bottom: 24px;
  padding-left: calc(var(--nav-w) + 12px); /* keep clear of fixed sidebar */
  padding-right: 24px;
}

/* Stop inner scroll so it doesn’t show a mid-page bar */
#fr-msg.container{
  overflow: visible !important;
  height: auto !important;
  min-height: auto !important;
  margin-left: 0;          /* sidebar gap handled by wrapper now */
  max-width: 1180px;
  margin-right: auto;
}

body { overflow-y: scroll; }  /* forces a right gutter on desktop */

/* === FINAL: put the scrollbar on the far right (viewport) === */

/* 1) The page scrolls */
html, body {
  height: auto !important;
  min-height: 100% !important;
  overflow-y: auto !important;       /* viewport handles scrolling */
}

/* 2) Stop inner scrolling anywhere in the messaging page */
#fr-msg.container {
  overflow: visible !important;       /* disable mid-page scrollbar */
  height: auto !important;
  min-height: 0 !important;
}

/* 3) If any wrapper is clipping scroll, open it up */
.page-scroll-shell,
.app-main,
main {
  overflow: visible !important;
  height: auto !important;
}
